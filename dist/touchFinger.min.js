!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["touch-finger"]=e():t["touch-finger"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var l=n[i]={i:i,l:!1,exports:{}};return t[i].call(l.exports,l,l.exports,e),l.l=!0,l.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){t.exports=n(1)},function(t,n,i){"use strict";function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function o(t,e){return t.x*e.x+t.y*e.y}function a(t,e){var n=s(t)*s(e);if(0===n)return 0;var i=o(t,e)/n;return i>1&&(i=1),Math.acos(i)}function u(t,e){return t.x*e.y-e.x*t.y}function h(t,e){var n=a(t,e);return u(t,e)>0&&(n*=-1),180*n/Math.PI}Object.defineProperty(n,"__esModule",{value:!0});var c=i(2),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=function(){},m=function(){function t(n,i){var o=this;l(this,t),this.start=function(t){if(t.touches){o.now=Date.now(),o.x1=t.touches[0].pageX,o.y1=t.touches[0].pageY,o.delta=o.now-(o.last||o.now),o.touchStart.dispatch(t,o.element),null!==o.preTapPosition.x&&(o.isDoubleTap=o.delta>0&&o.delta<=250&&Math.abs(o.preTapPosition.x-o.x1)<30&&Math.abs(o.preTapPosition.y-o.y1)<30,o.isDoubleTap&&clearTimeout(o.singleTapTimeout)),o.preTapPosition.x=o.x1,o.preTapPosition.y=o.y1,o.last=o.now;var e=o.preV;if(t.touches.length>1){o._cancelLongTap(),o._cancelSingleTap();var n={x:t.touches[1].pageX-o.x1,y:t.touches[1].pageY-o.y1};e.x=n.x,e.y=n.y,o.pinchStartLen=s(e),o.multipointStart.dispatch(t,o.element)}o._preventTap=!1,o.longTapTimeout=setTimeout(function(){o.longTap.dispatch(t,o.element),o._preventTap=!0},750)}},this.move=function(t){if(t.touches){var e=o.preV,n=t.touches.length,i=t.touches[0].pageX,l=t.touches[0].pageY;if(o.isDoubleTap=!1,n>1){var a=t.touches[1].pageX,u=t.touches[1].pageY,c={x:t.touches[1].pageX-i,y:t.touches[1].pageY-l};null!==e.x&&(o.pinchStartLen>0&&(t.zoom=s(c)/o.pinchStartLen,o.pinch.dispatch(t,o.element)),t.angle=h(c,e),o.rotate.dispatch(t,o.element)),e.x=c.x,e.y=c.y,null!==o.x2&&null!==o.sx2?(t.deltaX=(i-o.x2+a-o.sx2)/2,t.deltaY=(l-o.y2+u-o.sy2)/2):(t.deltaX=0,t.deltaY=0),o.twoFingerPressMove.dispatch(t,o.element),o.sx2=a,o.sy2=u}else{if(null!==o.x2){t.deltaX=i-o.x2,t.deltaY=l-o.y2;var r=Math.abs(o.x1-o.x2),p=Math.abs(o.y1-o.y2);(r>10||p>10)&&(o._preventTap=!0)}else t.deltaX=0,t.deltaY=0;o.pressMove.dispatch(t,o.element)}o.touchMove.dispatch(t,o.element),o._cancelLongTap(),o.x2=i,o.y2=l,n>1&&t.preventDefault()}},this.end=function(t){t.changedTouches&&(o._cancelLongTap(),t.touches.length<2&&(o.multipointEnd.dispatch(t,o.element),o.sx2=o.sy2=null),o.x2&&Math.abs(o.x1-o.x2)>30||o.y2&&Math.abs(o.y1-o.y2)>30?(t.direction=o._swipeDirection(o.x1,o.x2,o.y1,o.y2),o.swipeTimeout=setTimeout(function(){o.swipe.dispatch(t,o.element)},0)):(o.tapTimeout=setTimeout(function(){o._preventTap||o.tap.dispatch(t,o.element),o.isDoubleTap&&(o.doubleTap.dispatch(t,o.element),o.isDoubleTap=!1)},0),o.isDoubleTap||(o.singleTapTimeout=setTimeout(function(){o.singleTap.dispatch(t,o.element)},250))),o.touchEnd.dispatch(t,o.element),o.preV.x=0,o.preV.y=0,o.zoom=1,o.pinchStartLen=null,o.x1=o.x2=o.y1=o.y2=null)},this.cancelAll=function(){o._preventTap=!0,clearTimeout(o.singleTapTimeout),clearTimeout(o.tapTimeout),clearTimeout(o.longTapTimeout),clearTimeout(o.swipeTimeout)},this.cancel=function(){o.cancelAll(),o.touchCancel.dispatch(e,o.element)},this.on=function(t,e){o[t]&&o[t].add(e)},this.off=function(t,e){o[t]&&o[t].del(e)},this.element="string"==typeof n?document.querySelector(n):n,this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1,this.rotate=Object(c.a)(this.element,i.rotate||p),this.touchStart=Object(c.a)(this.element,i.touchStart||p),this.multipointStart=Object(c.a)(this.element,i.multipointStart||p),this.multipointEnd=Object(c.a)(this.element,i.multipointEnd||p),this.pinch=Object(c.a)(this.element,i.pinch||p),this.swipe=Object(c.a)(this.element,i.swipe||p),this.tap=Object(c.a)(this.element,i.tap||p),this.doubleTap=Object(c.a)(this.element,i.doubleTap||p),this.longTap=Object(c.a)(this.element,i.longTap||p),this.singleTap=Object(c.a)(this.element,i.singleTap||p),this.pressMove=Object(c.a)(this.element,i.pressMove||p),this.twoFingerPressMove=Object(c.a)(this.element,i.twoFingerPressMove||p),this.touchMove=Object(c.a)(this.element,i.touchMove||p),this.touchEnd=Object(c.a)(this.element,i.touchEnd||p),this.touchCancel=Object(c.a)(this.element,i.touchCancel||p),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}}return r(t,[{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=null,this.pinchStartLen=null,this.zoom=null,this.isDoubleTap=null,this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=null,this.x2=null,this.y1=null,this.y2=null,this.preTapPosition=null,this.rotate=null,this.touchStart=null,this.multipointStart=null,this.multipointEnd=null,this.pinch=null,this.swipe=null,this.tap=null,this.doubleTap=null,this.longTap=null,this.singleTap=null,this.pressMove=null,this.touchMove=null,this.touchEnd=null,this.touchCancel=null,this.twoFingerPressMove=null,null}}]),t}();n.default=m},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){i(this,t),this.el=e,this.handlers=[]}return l(t,[{key:"add",value:function(t){this.handlers.push(t)}},{key:"del",value:function(t){var e=this;t||(this.handlers=[]),this.handlers.forEach(function(n,i){t&&e.handlers.splice(i,1)})}},{key:"dispatch",value:function(){for(var t=0,e=this.handlers.length;t<e;t++){var n=this.handlers[t];"function"==typeof n&&n.apply(this.el,arguments)}}}]),t}(),o=function(t,e){var n=new s(t);return n.add(e),n};e.a=o}]).default});